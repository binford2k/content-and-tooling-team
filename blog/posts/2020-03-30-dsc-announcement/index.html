<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><meta name=robots content="index, follow"><link rel="shortcut icon" href=/content-and-tooling-team/favicons/favicon.ico><link rel=apple-touch-icon href=/content-and-tooling-team/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/content-and-tooling-team/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/content-and-tooling-team/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/content-and-tooling-team/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/content-and-tooling-team/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/content-and-tooling-team/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/content-and-tooling-team/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/content-and-tooling-team/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/content-and-tooling-team/favicons/android-192x192.png sizes=192x192><title>DSC + Puppet: Incoming! | Content and Tooling</title><meta name=description content="As Glenn and I alluded to on the PowerScripting Podcast, our team has been hard at work re-envisioning how we want to present the DSC + Puppet story …"><meta property="og:title" content="DSC + Puppet: Incoming!"><meta property="og:description" content="As Glenn and I alluded to on the PowerScripting Podcast, our team has been hard at work re-envisioning how we want to present the DSC + Puppet story for our users.
Long story short, for lots of reasons, our original implementation for calling DSC resources from inside Puppet (shoutout to Marc Sutter, the initial implementer!) was getting fragile, stale, and maintenance costs kept rising.
As a stop gap, we put together the dsc_lite module for people to use which dropped the guardrails and help in exchange for letting you just get to work if you needed to use it."><meta property="og:type" content="article"><meta property="og:url" content="https://puppetlabs.github.io/content-and-tooling-team/blog/posts/2020-03-30-dsc-announcement/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-03-30T00:00:00+00:00"><meta property="article:modified_time" content="2022-03-24T14:02:25+00:00"><meta itemprop=name content="DSC + Puppet: Incoming!"><meta itemprop=description content="As Glenn and I alluded to on the PowerScripting Podcast, our team has been hard at work re-envisioning how we want to present the DSC + Puppet story for our users.
Long story short, for lots of reasons, our original implementation for calling DSC resources from inside Puppet (shoutout to Marc Sutter, the initial implementer!) was getting fragile, stale, and maintenance costs kept rising.
As a stop gap, we put together the dsc_lite module for people to use which dropped the guardrails and help in exchange for letting you just get to work if you needed to use it."><meta itemprop=datePublished content="2020-03-30T00:00:00+00:00"><meta itemprop=dateModified content="2022-03-24T14:02:25+00:00"><meta itemprop=wordCount content="1275"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="DSC + Puppet: Incoming!"><meta name=twitter:description content="As Glenn and I alluded to on the PowerScripting Podcast, our team has been hard at work re-envisioning how we want to present the DSC + Puppet story for our users.
Long story short, for lots of reasons, our original implementation for calling DSC resources from inside Puppet (shoutout to Marc Sutter, the initial implementer!) was getting fragile, stale, and maintenance costs kept rising.
As a stop gap, we put together the dsc_lite module for people to use which dropped the guardrails and help in exchange for letting you just get to work if you needed to use it."><link rel=preload href=/content-and-tooling-team/scss/main.min.708b8eb536aa0debb8b80098b7381547f2d71482d991ac4d1a493e8e52687dc0.css as=style><link href=/content-and-tooling-team/scss/main.min.708b8eb536aa0debb8b80098b7381547f2d71482d991ac4d1a493e8e52687dc0.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-00000000-0','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/content-and-tooling-team/><span class=navbar-logo><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" id="svg3713" width="30" height="30" viewBox="0 0 30 30.000001" sodipodi:docname="puppet-logo-amber.svg" inkscape:version="0.92.4 (5da689c313, 2019-01-14)"><defs id="defs3717"/><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="2544" inkscape:window-height="1221" id="namedview3715" showgrid="false" inkscape:zoom="9.1657311" inkscape:cx="95.465911" inkscape:cy="-12.96395" inkscape:window-x="-8" inkscape:window-y="-8" inkscape:window-maximized="1" inkscape:current-layer="g3721" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0"/><g id="g3721" inkscape:groupmode="layer" inkscape:label="Puppet-Logo-Mark-Amber" transform="matrix(1.3333333,0,0,-1.3333333,-30.985333,60.985317)"><path d="m32.416539 25.664063h-2.164731v2.16473h2.164731zm-2.164731 17.420479h2.164731v-2.16473h-2.164731zm11.960601-5.463051h-4.96675l.0015.0015-2.66579 2.66579v4.96057h-6.494368v-6.494377h4.966749l2.662712-2.662711.0016.0015v-3.439051l-.0032.0032-2.664205-2.664297v0H28.087v-6.494377h6.494377v4.963577.0l2.664204 2.664297h4.966843z" style="fill:#ffae1a;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:.09330733" id="path3723" inkscape:connector-curvature="0"/></g></svg></span><span class="text-uppercase font-weight-bold">Content and Tooling</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/content-and-tooling-team/pct/><span>PCT</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/content-and-tooling-team/prm/><span>PRM</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/content-and-tooling-team/blog/><span class=active>Blog</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-content-and-tooling-teamblog-li><a href=/content-and-tooling-team/blog/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-content-and-tooling-teamblog><span>Blog</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-content-and-tooling-teamblogposts-li><a href=/content-and-tooling-team/blog/posts/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-content-and-tooling-teamblogposts><span>Posts</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogpostsprm-initial-release-li><a href=/content-and-tooling-team/blog/posts/prm-initial-release/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogpostsprm-initial-release><span>Puppet Runtime Manager 0.1.0 Release 🚀</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogposts2021-10-20-fond-farewell-li><a href=/content-and-tooling-team/blog/posts/2021-10-20-fond-farewell/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogposts2021-10-20-fond-farewell><span>A Fond Farewell For Now to Community Day & Norman</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogpostsfuture-of-pdk-li><a href=/content-and-tooling-team/blog/posts/future-of-pdk/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogpostsfuture-of-pdk><span>The future of the Puppet Developer Kit (PDK)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogposts2021-06-04-pct-early-release-li><a href=/content-and-tooling-team/blog/posts/2021-06-04-pct-early-release/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogposts2021-06-04-pct-early-release><span>Puppet Content Templates 0.1.0 🚀</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogposts2021-05-07-running-multinode-modules-gcp-li><a href=/content-and-tooling-team/blog/posts/2021-05-07-running-multinode-modules-gcp/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogposts2021-05-07-running-multinode-modules-gcp><span>Run multi-node module tests with cloud continuous integration (CI) in Google Cloud Platform (GCP)</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child"><a href=https://puppetlabs.github.io/content-and-tooling-team/blog/posts/>View More</a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-content-and-tooling-teamblogupdates-li><a href=/content-and-tooling-team/blog/updates/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-content-and-tooling-teamblogupdates><span>Updates</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogupdates2021-10-11-status-update-li><a href=/content-and-tooling-team/blog/updates/2021-10-11-status-update/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogupdates2021-10-11-status-update><span>2021-10-11: IAC & DevX Team Status Update</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogupdates2021-10-04-status-update-li><a href=/content-and-tooling-team/blog/updates/2021-10-04-status-update/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogupdates2021-10-04-status-update><span>2021-10-04: IAC & DevX Team Status Update</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogupdates2021-09-20-status-update-li><a href=/content-and-tooling-team/blog/updates/2021-09-20-status-update/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogupdates2021-09-20-status-update><span>2021-09-20: IAC & DevX Team Status Update</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogupdates2021-09-13-status-update-li><a href=/content-and-tooling-team/blog/updates/2021-09-13-status-update/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogupdates2021-09-13-status-update><span>2021-09-13: IAC & DevX Team Status Update</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-content-and-tooling-teamblogupdates2021-09-06-status-update-li><a href=/content-and-tooling-team/blog/updates/2021-09-06-status-update/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-content-and-tooling-teamblogupdates2021-09-06-status-update><span>2021-09-06: IAC & DevX Team Status Update</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child"><a href=https://puppetlabs.github.io/content-and-tooling-team/blog/updates/>View More</a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/puppetlabs/content-and-tooling-team/edit/main/content/en/blog/posts/2020-03-30-dsc-announcement.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/puppetlabs/content-and-tooling-team/new/main/content/en/blog/posts/2020-03-30-dsc-announcement.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href=https://github.com/puppetlabs/content-and-tooling-team/issues/new/choose target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/puppetlabs/content-and-tooling-team/issues/new/choose target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
<a href=https://github.com/puppetlabs/content-and-tooling-team/discussions/new target=_blank><i class="fas fa-comments fa-fw"></i> Create new discussion topic</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#so-about-this-builder>So, About This Builder</a></li><li><a href=#so-it-works-what-next>So It Works. What Next?</a></li><li><a href=#caveats-and-warnings>Caveats and Warnings</a></li><li><a href=#wrapping-up-call-to-action>Wrapping Up, Call to Action</a></li></ul></nav></div><script>function revealTags(a){console.log(a);var b=document.getElementsByClassName("hidden");for(let c of b)c.id.split("--")[0]==a&&(c.style.display="inline-block");document.getElementById(a).remove()}</script><div class="taxonomy taxonomy-terms-cloud taxo-categories"><h5 class=taxonomy-title>Categories</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://puppetlabs.github.io/content-and-tooling-team/categories/updates/ data-taxonomy-term=updates><span class=taxonomy-label>updates</span><span class=taxonomy-count>82</span></a></li><li><a class=taxonomy-term href=https://puppetlabs.github.io/content-and-tooling-team/categories/content/ data-taxonomy-term=content><span class=taxonomy-label>content</span><span class=taxonomy-count>8</span></a></li><li><a class=taxonomy-term href=https://puppetlabs.github.io/content-and-tooling-team/categories/tooling/ data-taxonomy-term=tooling><span class=taxonomy-label>tooling</span><span class=taxonomy-count>5</span></a></li><li><a class=taxonomy-term href=https://puppetlabs.github.io/content-and-tooling-team/categories/team/ data-taxonomy-term=team><span class=taxonomy-label>team</span><span class=taxonomy-count>4</span></a></li></ul></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><div class=td-content><h1>DSC + Puppet: Incoming!</h1><div class="td-byline mb-4">By <b>michaeltlombardi</b> |
<time datetime=2020-03-30 class=text-muted>Monday, March 30, 2020</time></div><header class=article-meta><div class="taxonomy taxonomy-terms-article taxo-categories"><h5 class=taxonomy-title>Categories:</h5><ul class=taxonomy-terms><li><a class=taxonomy-term href=https://puppetlabs.github.io/content-and-tooling-team/categories/content/ data-taxonomy-term=content><span class=taxonomy-label>content</span></a></li></ul></div></header><p>As <a href=https://github.com/glennsarti>Glenn</a> and I alluded to on the <a href=https://player.fm/series/powerscripting-podcast/episode-334-powerscripting-podcast-glenn-sarti-michael-lombardi>PowerScripting Podcast</a>, our team has been hard at work re-envisioning how we want to present the DSC + Puppet story for our users.</p><p><a href=https://tickets.puppetlabs.com/browse/IAC-41>Long story short</a>, for lots of reasons, our <a href=https://forge.puppet.com/puppetlabs/dsc>original implementation</a> for calling DSC resources from inside Puppet (shoutout to <a href=https://github.com/msutter>Marc Sutter</a>, the initial implementer!) was getting fragile, stale, and maintenance costs kept rising.</p><p>As a stop gap, we put together the <a href=https://forge.puppet.com/puppetlabs/dsc_lite>dsc_lite</a> module for people to use which dropped the guardrails and help in exchange for letting you just get to work if you needed to use it.
Essentially the thinnest of wrappers over <a href="https://docs.microsoft.com/en-us/powershell/module/psdesiredstateconfiguration/invoke-dscresource?view=powershell-7"><code>Invoke-DscResource</code></a>, requiring you to get those resources onto the target and to pass an arbitrary hash of <em>hopefully</em> correct properties to the DSC resource;
no way to tell if you goofed til run time.</p><p>We made <a href=https://forge.puppet.com/puppetlabs/dsc_lite>dsc_lite</a> for the DSC expert, <a href=https://github.com/puppetlabs/puppetlabs-dsc_lite/blob/master/README_Tradeoffs.md>basically</a>.
But as time went on and we could no longer use our old builder to update our original module&mldr;
we were leaving a <strong>lot</strong> of people in the cold with a less than stellar UX.</p><p>So my team decided to change that story.</p><p>We talked it out, <a href=https://tickets.puppetlabs.com/browse/IAC-41>planned some stuff</a> and adopted <a href=https://github.com/jpogran>James Pogran</a>&rsquo;s INCREDIBLE <a href=https://github.com/jpogran/PuppetDscBuilder>prototype work</a>—he did 80% of the initial work for this, basically all the hardest bits. 💜</p><h2 id=so-about-this-builder>So, About This Builder</h2><p>The <a href=https://github.com/puppetlabs/PuppetDscBuilder>whole thing</a> is written in and relies on PowerShell, not Ruby.
The only non-PowerShell dependency is the <a href=https://puppet.com/docs/pdk/1.x/pdk.html>Puppet Development Kit</a> for scaffolding the Puppet module out (no reason to re-implement that!)</p><p>It builds on two important technologies:</p><ol><li>The <a href=https://puppet.com/docs/puppet/latest/about_the_resource_api.html>resource_api</a> (largely developed by <a href=https://github.com/DavidS>David Schmitt</a>), makes writing Puppet types and providers <em>actually</em> doable for people like me—the type file is just data, the provider adheres to a simple schema.</li><li>The <a href=https://github.com/puppetlabs/ruby-pwsh/>ruby-pwsh</a> gem, based on work by numerous members of the former Windows team at Puppet:
<a href=https://github.com/glennsarti>Glenn Sarti</a>, <a href=https://github.com/jpogran>James Pogran</a>, <a href=https://github.com/Iristyle>Ethan Brown</a>, <a href=https://github.com/RandomNoun7>Bill Hurt</a>, <a href=https://github.com/ThoughtCrhyme>Erick Banks</a>, <a href=https://github.com/ferventcoder>Rob Reynolds</a>, and me.
This gem is a library that gives you a <a href=https://github.com/puppetlabs/ruby-pwsh/blob/master/DESIGN.md>PowerShell manager</a>, enabling you to interop between PowerShell & Ruby.
That lets us take advantage of having a PowerShell host process and not shell out for every command.
It&rsquo;s <em>much</em> faster and paves the way for some really cool improvements.
It&rsquo;s also what powers all of our Puppet modules which rely heavily on PowerShell calls!</li></ol><p>This builder scaffolds a new Puppet module, vendors a PowerShell module from the Gallery (<em>with</em> dependencies), introspects that module for DSC resources, then generates a Puppet resource_api type and provider for each DSC resource.</p><p>It has a <a href=https://github.com/puppetlabs/PuppetDscBuilder/blob/c5d349f51883abcca926a0dc6be465a037dfe957/Get-DscResourceTypeInformation.ps1>helper function</a> which desperately needs refactoring but which parses the <a href=https://mikefrobbins.com/2018/09/28/learning-about-the-powershell-abstract-syntax-tree-ast/>AST</a> for the DSC resource&rsquo;s source file (if it can) to retrieve the reference docs, default values, and whether the parameter is mandatory for get/set operations.
If it <em>can&rsquo;t</em> parse the AST (as with binary/class-based DSC resources in this iteration) it still works&ndash;
it just won&rsquo;t have the reference docs and will rely on the best info it can find in the output from <a href="https://docs.microsoft.com/en-us/powershell/module/psdesiredstateconfiguration/get-dscresource?view=powershell-7"><code>Get-DscResource</code></a>.</p><p>Okay, <em>fine</em>, <em><strong>weeeee</strong></em>, it <a href=https://github.com/puppetlabs/PuppetDscBuilder/files/4395886/michaeltlombardi-powershellget-0.1.0.tar.gz>builds a module</a>, great.
But what does using it look like?
I&rsquo;m glad you asked.
First of all, here&rsquo;s what a very basic manifest using a <a href=https://github.com/puppetlabs/PuppetDscBuilder/files/4395886/michaeltlombardi-powershellget-0.1.0.tar.gz>puppetized module</a> looks like&ndash;in this case, <a href=https://www.powershellgallery.com/packages/PowerShellGet/2.2.3>PowerShellGet</a>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-puppet data-lang=puppet><span style=color:#50fa7b>dsc_psrepository</span> {<span style=color:#f1fa8c>&#39;Add team shared module folder as a repository&#39;</span>:
    <span style=color:#50fa7b>dsc_name</span>               <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;foo&#39;</span>,
    <span style=color:#50fa7b>dsc_ensure</span>             <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>present</span>,<span style=color:#6272a4>
</span><span style=color:#6272a4>    # This location is nonsense, can be any valid folder on your
</span><span style=color:#6272a4>    # machine or in a share, any location the SourceLocation param
</span><span style=color:#6272a4>    # for the DSC resource will accept.</span>
    <span style=color:#50fa7b>dsc_sourcelocation</span>     <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;C:\Program Files&#39;</span>,
    <span style=color:#50fa7b>dsc_installationpolicy</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#50fa7b>untrusted</span>,
}

<span style=color:#50fa7b>dsc_psrepository</span> {<span style=color:#f1fa8c>&#39;Trust the PowerShell Gallery&#39;</span>:
    <span style=color:#50fa7b>dsc_name</span>               <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;PSGallery&#39;</span>,
    <span style=color:#50fa7b>dsc_ensure</span>             <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>present</span>,
    <span style=color:#50fa7b>dsc_installationpolicy</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#50fa7b>trusted</span>,
}

<span style=color:#50fa7b>dsc_psmodule</span> {<span style=color:#f1fa8c>&#39;Ensure Ruby is Manageable via uru&#39;</span>:
  <span style=color:#50fa7b>dsc_name</span>   <span style=color:#ff79c6>=&gt;</span> <span style=color:#f1fa8c>&#39;RubyInstaller&#39;</span>,
  <span style=color:#50fa7b>dsc_ensure</span> <span style=color:#ff79c6>=&gt;</span> <span style=color:#ff79c6>absent</span>,
}
</code></pre></div><p>And, well? It works! It&rsquo;s idempotent! And, much more interestingly from my perspective, it gives you property-by-property reporting for your DSC resources&ndash;it knows what the state of the resource is on your node before it calls the Set method for Invoke-DscResource&mldr;</p><p><img src=/content-and-tooling-team/assets/2020-03-30-dsc-announcement/property-rep.png alt="Puppet run output reading &ldquo;dsc_sourcelocation changed &lsquo;C:\code\temp&rsquo; to &lsquo;C:\Program Files&rsquo;" "></p><p>So it can actually tell you <em>what changed</em> during the run and when.
In other words, DSC resources in this implementation now report <strong>just</strong> like any other Puppet resource.</p><p>That&rsquo;s pretty neat!!</p><p>What else do you get?
Intellisense and some other awesome magic!
Thanks to the <a href=https://puppet-vscode.github.io/>VSCode extension</a> maintained by <a href=https://github.com/jpogran>James Pogran</a> and <a href=https://github.com/glennsarti>Glenn Sarti</a>—in this screenshot, the editor is aware of all the parameters you might select, what their type is, and the valid values!</p><p>![Image displaying intellisense capabilities of the VSCode extension where it is predicting which parameters to use and displaying their help information inline in the editor.](/content-and-tooling-team/assets/2020-03-30-dsc-announcement/intellisense.jfif %})</p><blockquote><p><strong>Aside:</strong>
You <em>are</em> writing your Puppet code in VSCode with the <a href=https://puppet-vscode.github.io/>Puppet extension</a> installed, aren&rsquo;t you?
You&rsquo;re taking advantage of the <a href=https://puppet-vscode.github.io/docs/features/intellisense>intellisense</a>, <a href=https://puppet-vscode.github.io/docs/features/code-navigation>code navigation</a>, <a href=https://puppet-vscode.github.io/docs/features/linting>auto linting</a>, <a href=https://puppet-vscode.github.io/docs/features/debugging-puppet-code>debugging</a>, and the <a href=https://puppet-vscode.github.io/docs/features/puppet-development-kit>PDK</a>, <a href=https://puppet-vscode.github.io/docs/features/puppet-bolt>Bolt</a>, & <a href=https://puppet-vscode.github.io/docs/features/control-repository>Control Repo</a> integrations&mldr; right??</p></blockquote><h2 id=so-it-works-what-next>So It Works. What Next?</h2><p>We still have some testing and a host of improvements to make (including probably swapping our template engine out, shout out to <a href=https://github.com/FriedrichWeinmann>Fred Weinmann</a> for the <a href=https://psframework.org/documentation/documents/psmoduledevelopment/templates.html>templating engine</a> in the <a href=https://github.com/PowershellFrameworkCollective/PSModuleDevelopment>PSModuleDevelopment</a> module), but the next big step—and likely the last I&rsquo;ll be involved with before my paternity leave hits—is <a href=https://tickets.puppetlabs.com/browse/IAC-648>turning this build script into a PowerShell module and adding testing to it</a>.
It <em>works</em> as a build script, but it can definitely be improved.
And, okay, a module on the Gallery is great and all&mldr;</p><p>But the <strong>really cool</strong> end-user magic will arrive in the <a href=https://tickets.puppetlabs.com/browse/IAC-649>third phase</a>, where we hope to be able to automatically build and publish Puppet modules that 1:1 wrap PowerShell modules with DSC resources and expose them as Puppet types and providers!</p><p>We&rsquo;re envisioning a future where not only can you Puppetize any DSC-Resource-having-module you want for yourself, but you can just find all of the modules publicly available on the Gallery already wrapped up and ready for you on the Puppet Forge!</p><h2 id=caveats-and-warnings>Caveats and Warnings</h2><p>We&rsquo;re <em>just</em> wrapping the underlying DSC resources and making them available to you.
If there&rsquo;s a problem <em>calling</em> the DSC resources from Puppet, we&rsquo;ll work on it, but if there&rsquo;s a problem with <em>how</em> those resources behave, that&rsquo;s upstream.</p><p>Our team is full of lovely humans who do incredible amounts of work (seven people for <a href=https://puppetlabs.github.io/community_management/>>250 PRs/month, ~50 supported modules</a>, <a href=https://puppetlabs.github.io/iac/tools/>over a dozen open source tools</a>, contributing to dozens more) but we can&rsquo;t adopt > 300 DSC modules too. 💔</p><p>We&rsquo;ll also continue to improve the underlying provider and build system, of course, and are excited to get the output modules fully functional for PowerShell 7+ - meaning they&rsquo;ll be cross-platform compatible if the underlying resources are!
This first prototype is just 5.1 though.</p><h2 id=wrapping-up-call-to-action>Wrapping Up, Call to Action</h2><p>So! If you&rsquo;re interested in the work so far, you can <a href=https://github.com/puppetlabs/PuppetDscBuilder>check it out on GitHub</a>&ndash;
the <a href=https://github.com/puppetlabs/PuppetDscBuilder/pull/1>latest PR</a> includes functional instructions for testing the new builder or just <a href=https://github.com/puppetlabs/PuppetDscBuilder/files/4395886/michaeltlombardi-powershellget-0.1.0.tar.gz>grabbing the test module</a> and playing with it in your own lab!</p><p>We wanna tighten the loop and ensure we&rsquo;re solving your problems with this rework because the <em>whole point</em> is to make your lives easier if you&rsquo;re using Puppet and DSC.
We&rsquo;re here to help you get your configuration under control and free you up to do all the other hard work you have on your backlog.</p><p>With that in mind, we would love your feedback, so if this tickles your interest at all, please <a href=mailto:dsc@puppet.com>email us</a> (<a href=mailto:dsc@puppet.com>dsc@puppet.com</a>) or comment below and let us know:</p><ol><li>What are the top three PowerShell modules with DSC resources you&rsquo;d like to see Puppetized?</li><li>Are you interested in joining our beta test group for this ongoing project?</li></ol><p>If you just wanna keep an eye on things, you can follow the repository on GitHub and the <a href=https://tickets.puppetlabs.com/browse/IAC-41>parent epic in JIRA</a>!</p><p>Thanks, folx!</p><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/content-and-tooling-team/blog/posts/2020-03-18-how-to-use-agent-information-on-puppetserver/ aria-label="Previous - How to use agent-side information on the puppetserver" class="btn btn-primary"><span class=mr-1>←</span>Previous</a></li><a href=/content-and-tooling-team/blog/posts/2020-03-30-debugging-unit-tests-with-honeycomb/ aria-label="Next - Debugging unit-tests with Honeycomb" class="btn btn-primary">Next<span class=ml-1>→</span></a></li></ul></div></main></div></div><footer class="py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/puppetize aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://puppetcommunity.slack.com/ aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/puppetlabs/content-and-tooling-team aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Puppet All Rights Reserved</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script><script src=/content-and-tooling-team/js/tabpane-persist.js></script><script src=/content-and-tooling-team/js/main.min.20a756bd86e5baf68cf7cef0159a97a60c58d42f04b8b13448fe311997b49fda.js integrity="sha256-IKdWvYbluvaM987wFZqXpgxY1C8EuLE0SP4xGZe0n9o=" crossorigin=anonymous></script></body></html>